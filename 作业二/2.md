文档:
## 作业2：评估指标
学号：
姓名：
日期：
授课教师：Shangsong Liang
课程：机器学习与数据挖掘
学校：中山大学

### 练习1：基于排序的评估指标，MAP@K, MRR@K
假设你有三个查询，系统针对这三个查询的排序结果如下：
针对查询#1的排序1是：d1, d2, d3, d4, d5, d6, d7, d8, d9, d10。这里只有 d1, d3, d4, d6, d7, 和 d10 是相关的（相关性是二进制的，即相关为1，不相关为0）。
针对查询#2的排序2是：d3, d8, d7, d1, d2, d4, d5, d9, d10, d6。这里只有 d8 和 d9 是相关的。
针对查询#3的排序3是：d7, d6, d5, d3, d2, d1, d9, d10, d4, d8。这里只有 d5, d9, 和 d8 是相关的。
回答以下问题。
(a) 计算这些指标的分数：每个查询的 AP@5（平均精度@5）和 AP@10；每个查询的 RR@5（倒数排名得分@5）和 RR@10。
(b) 计算这些指标的分数：该系统的 MAP@5（平均平均精度@5）、MAP@10、MRR@5（平均倒数排名得分@5）和 MRR@10。

### 练习2：基于排序的评估指标，Precision@K, Recall@K, NDCG@K
假设一个给定查询的排序如下（仅显示1-10位结果）；见表1。“rank”列给出了文档的排名。“docID”列给出了该排名下文档的ID。“graded relevance”列给出了文档的相关性等级（4=完美，3=优秀，2=良好，1=一般，0=差）。“binary relevance”列提供了二进制的相关性值（1=相关，0=不相关）。假设任何相关性等级为“一般”或更好的文档都是相关的，任何等级为“差”的文档都是不相关的。
同时，假设该查询只有7个相关性等级为一般或更好的文档。它们恰好都排在了这个给定排序的前10名中。
回答以下问题。P@K（精度@K）、R@K（召回率@K）和平均精度（AP）假设是二进制相关性。对于这些指标，请使用“binary relevance”列。DCG 和 NDCG 假设是分级相关性。对于这些指标，请使用“graded relevance”列。
表1 系统针对某个查询返回的Top-10排序结果
| rank | docID | graded relevance | binary relevance |
|------|-------|------------------|------------------|
| 1    | 832   | 4                | 1                |
| 2    | 103   | 3                | 1                |
| 3    | 256   | 2                | 1                |
| 4    | 771   | 1                | 1                |
| 5    | 909   | 0                | 0                |
| 6    | 511   | 1                | 1                |
| 7    | 302   | 0                | 0                |
| 8    | 120   | 1                | 1                |
| 9    | 441   | 0                | 0                |
| 10   | 690   | 1                | 1                |

(a) 计算 P@5 和 P@10。
(b) 计算 R@5 和 R@10。
(c) 提供一个能最大化此查询 P@5 的排序示例。
(d) 提供一个能最大化此查询 P@10 的排序示例。
(e) 提供一个能最大化此查询 R@5 的排序示例。
(f) 提供一个能最大化此查询 R@10 的排序示例。
(g) 你有理由相信该系统的用户希望检查给定查询的每一个相关文档。换句话说，你最近认为用户想要完美的召回率。你想基于 P@K 进行评估。在这种情况下，是否存在一种特别合适的、针对特定查询的设置 K 值的方法？它是什么？（提示：有一个评估指标叫做 R-Precision，我们在课程中没有讲到。你的答案应该与 R-Precision 相关。维基百科/谷歌可能有助于找到答案。）
(h) 计算平均精度（AP）。AP 和 MAP（平均平均精度）之间有什么区别？
(i) 提供一个能最大化此查询平均精度（AP）的排序示例。
(j) 计算 $DCG_{5}$（即排名5的折损累积增益）。
(k) $NDCG_{5}$ 由以下公式给出
$$ NDCG_5 = \frac{DCG_5}{IDCG_5} $$
其中 $IDCG_{5}$ 是与该查询相关的理想前5排名所对应的 $DCG_{5}$。计算 $NDCG_{5}$ 需要三个步骤。
(i) 与该查询相关的理想前5排名是什么（注意该查询有2个完美文档、1个优秀文档、1个良好文档、3个一般文档，其余文档为差）？
(ii) $IDCG_{5}$ 是与理想排名相关的 $DCG_{5}$。计算 $IDCG_{5}$。（提示：计算你在部分(i)中提出的排名的 $DCG_{5}$。）
(iii) 使用上述公式计算 NDCG $_{5}$。
(l) 还有哪些其他评估指标可用于评估表中排序的性能？这些指标得到的评估分数是多少？

### 练习3：精确率-召回率曲线
精确率-召回率（PR）曲线将精确率表示为召回率的函数。通常，PR曲线会为评估集中的每个查询计算，然后取平均值。为简单起见，本问题的目标是为单个查询绘制PR曲线。绘制与练习2中排序相关的PR曲线（相同查询，相同结果）。（提示：你的PR曲线应随着召回率水平的提高而始终下降。）

### 练习4：其他评估指标
除了我们课件中的指标，还有哪些其他评估指标可用于评估数据挖掘中特定任务的性能？这些任务是什么？如何计算这些评估指标？（提示：使用互联网查找答案。）