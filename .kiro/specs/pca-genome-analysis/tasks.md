# 实现计划

- [x] 1. 创建项目结构和数据加载功能
  - 创建主程序文件`Homework 5 PCA/pca_genome_analysis.py`
  - 创建results目录用于保存输出
  - 实现`load_genome_data()`函数加载基因组数据
  - 实现`load_population_decoding()`函数加载种群解码
  - 验证数据加载正确（995个个体，10101个核苷酸）
  - _需求: 1.1, 1.2, 1.3, 1.4, 1.5_

- [x] 2. 实现二值矩阵转换
  - [x] 2.1 实现众数核苷酸计算
    - 实现`compute_mode_nucleobases()`函数
    - 对每个位置（列）计算众数核苷酸
    - 处理可能的平局情况
    - _需求: 2.1_
  
  - [x] 2.2 实现二值矩阵创建
    - 实现`create_binary_matrix()`函数
    - 将核苷酸序列转换为0/1矩阵
    - X[i,j]=0表示众数，X[i,j]=1表示突变
    - 验证矩阵维度为995×10101
    - _需求: 2.2, 2.3, 2.4, 2.5_

- [x] 3. 实现PCA分析模块
  - [x] 3.1 创建PCAAnalyzer类
    - 定义类和初始化方法
    - 使用sklearn.decomposition.PCA
    - 设置n_components=3
    - _需求: 3.4_
  
  - [x] 3.2 实现PCA拟合和转换
    - 实现`fit_transform()`方法
    - 对数据进行中心化（center=True）
    - 不进行标准化（scale=False）
    - 返回投影后的数据
    - _需求: 3.1, 3.2, 3.6_
  
  - [x] 3.3 实现主成分提取
    - 实现`get_components()`方法
    - 确保主成分是单位向量
    - 实现`get_explained_variance_ratio()`方法
    - _需求: 3.3, 3.6_

- [x] 4. 回答问题(a) - 主成分维度
  - 实现`answer_question_a()`函数
  - 计算主成分向量的维度（应为10101）
  - 生成解释说明
  - 打印答案
  - _需求: 4.1, 4.2_

- [x] 5. 回答问题(b) - PC1 vs PC2散点图
  - [ ] 5.1 实现散点图绘制
    - 实现`plot_pc1_pc2_scatter()`函数
    - 将995个个体投影到PC1和PC2
    - 使用PC1作为x轴，PC2作为y轴
    - _需求: 5.1, 5.2_
  
  - [ ] 5.2 添加颜色和图例
    - 为每个种群使用不同颜色
    - 添加种群标签图例
    - 设置轴标签和标题
    - 保存为高分辨率图像
    - _需求: 5.3, 5.4, 5.5_

- [ ] 6. 回答问题(c) - 解释PC1和PC2
  - 实现`answer_question_c()`函数
  - 分析PC1 vs PC2散点图
  - 生成1-2句话描述基本事实
  - 解释主成分捕捉的数据特征（地理/历史）
  - _需求: 6.1, 6.2, 6.3_

- [ ] 7. 回答问题(d) - PC1 vs PC3散点图
  - [ ] 7.1 实现散点图绘制
    - 实现`plot_pc1_pc3_scatter()`函数
    - 将个体投影到PC1和PC3
    - 使用PC1作为x轴，PC3作为y轴
    - _需求: 7.1, 7.2_
  
  - [ ] 7.2 尝试不同标签方案
    - 测试性别标签
    - 测试种群标签
    - 选择能最好解释聚类的标签
    - 添加图例并保存图表
    - _需求: 7.3, 7.4, 7.5, 7.6_

- [ ] 8. 回答问题(e) - 解释PC3
  - 实现`answer_question_e()`函数
  - 分析PC1 vs PC3散点图
  - 识别PC3中的显著模式
  - 用一句话说明PC3捕捉的信息
  - _需求: 8.1, 8.2_

- [ ] 9. 回答问题(f) - PC3值分布
  - [ ] 9.1 绘制PC3值分布图
    - 实现`plot_pc3_values()`函数
    - 绘制核苷酸索引（1-10101）vs PC3绝对值
    - 设置轴标签和标题
    - 保存图表
    - _需求: 9.1, 9.2, 9.5_
  
  - [ ] 9.2 分析和解释
    - 实现`answer_question_f()`函数
    - 识别图表中的显著特征
    - 提供生物学解释（染色体相关）
    - _需求: 9.3, 9.4_

- [ ] 10. 回答问题(g) - 方差解释比例
  - [ ] 10.1 计算方差解释比例
    - 实现`answer_question_g()`函数
    - 计算PC1解释的方差百分比
    - 计算前3个PC解释的总方差百分比
    - _需求: 10.1, 10.2_
  
  - [ ] 10.2 计算平方长度减少
    - 计算投影后平均平方长度的减少百分比
    - 清晰显示两个百分比值
    - 生成1-2句话讨论结果
    - _需求: 10.3, 10.4, 10.5_

- [ ] 11. 实现结果输出功能
  - 实现`save_results()`函数
  - 收集所有问题的答案
  - 保存到analysis_results.txt
  - 确保格式清晰易读
  - _需求: 11.2, 11.3_

- [ ] 12. 完善代码文档
  - 添加文件头部说明
  - 为所有函数添加docstring
  - 添加关键步骤的注释
  - 确保代码可读性
  - _需求: 11.1, 11.5_

- [ ] 13. 创建主程序入口
  - [ ] 13.1 实现main()函数
    - 加载数据
    - 创建二值矩阵
    - 执行PCA分析
    - 回答所有问题
    - 生成所有图表
    - 保存结果
    - _需求: 11.2, 11.3_
  
  - [ ] 13.2 测试完整流程
    - 运行程序确保无错误
    - 验证所有图表生成
    - 检查所有答案输出
    - 确保文件保存到正确位置
    - _需求: 11.2, 11.3_

- [ ] 14. 创建README文档
  - 说明项目目的
  - 列出依赖环境
  - 提供运行说明
  - 解释输出文件
  - _需求: 11.4_

- [ ] 15. 最终验证
  - 验证所有7个问题都已回答
  - 检查所有要求的图表都已生成
  - 确认代码在附录或单独文件中
  - 验证输出格式符合要求
  - _需求: 11.1, 11.2, 11.3, 11.4_
